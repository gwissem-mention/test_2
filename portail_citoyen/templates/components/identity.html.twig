<div {{ attributes.add(stimulus_controller('complaint-submit')) }}>
    {{ form_start(form, {attr: {'data-action': 'live#action complaint-submit#submit','data-action-name': 'prevent|submit'}}) }}
    <div class="fr-grid-row">
        <div class="fr-col">
            <div id="form-identity" class="fr-py-1w">
                <div class="fr-py-1w">
                    {% include 'common/_civil_state.html.twig' with {'form':form.civilState} %}
                </div>
                <div class="fr-py-1w">
                    {% include 'common/_contact_information.html.twig' with {
                        'form':form.contactInformation,
                        'template_id': 'contact-information',
                        'etalabPropertyName': 'contactInformationEtalabInput',
                    } %}
                </div>
                {% if form.corporation is defined %}
                    {% include 'common/_corporation.html.twig' with {'form':form.corporation} %}
                {% endif %}
                {% if form.representedPersonCivilState is defined and form.representedPersonContactInformation is defined %}
                    <h2>{{ 'pel.represented.person.identity'|trans }}</h2>
                    <div class="fr-py-1w">
                        {% include 'common/_civil_state.html.twig' with {'form':form.representedPersonCivilState} %}
                    </div>
                    <div class="fr-py-1w">
                        {% include 'common/_contact_information.html.twig' with {
                            'form':form.representedPersonContactInformation,
                            'template_id': 'represented-person',
                            'etalabPropertyName': 'representedPersonEtalabInput',
                        } %}
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="flex--between fr-mt-3w fr-mb-3w">
        <a href="{{ path('complaint_declarant_status') }}" class="fr-btn fr-btn--secondary fr-btn--icon-left fr-icon-arrow-left-line">{{ 'pel.previous'|trans }}</a>
        <ul class="fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-lg fr-btns-group--icon-left">
            <li>
                <button type="submit" class="fr-btn fr-btn--icon-right fr-icon-arrow-right-line" id="identity_submit" {% if this.fromSummary is same as(true) %}data-action="live#action" data-action-name="prevent|submit"{% endif %}>{{ this.fromSummary is same as(true) ? 'pel.save.and.go.to.next'|trans : 'pel.next'|trans }}</button>
            </li>
            {% if this.fromSummary is same as(true) %}
                <li>
                    <button type="submit" class="fr-btn fr-btn--icon-right fr-icon-arrow-right-line" id="identity_submit_recap" data-action="live#action" data-action-name="prevent|submit(redirectToSummary=true)">{{ 'pel.save.and.go.to.summary'|trans }}</button>
                </li>
            {% endif %}
        </ul>
    </div>
    {{ form_end(form, {render_rest: false}) }}
</div>
